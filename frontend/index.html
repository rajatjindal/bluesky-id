<!doctype html>
<html>

<head>
    <title>Retrieve Blue Sky DID</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="icon" type="image/png" href="/favicon.ico">

    <meta charset="utf-8">
    <meta data-hid="description" name="description" content="Blue Sky DID">
    <meta charset="utf-8">
    <meta name="content-type" http-equiv="Content-type" content="text/html; charset=UTF-8">
    <meta data-hid="og:title" name="og:title" content="Find DID for your Blue Sky Social handle">
    <meta data-hid="og:image" name="og:image" content="https://bluesky-id.fermyon.app/static/social.jpeg">
    <meta data-hid="og:image:alt" name="og:image:alt" content="Get Blue Sky DID from your handle">
    <meta data-hid="og:url" name="og:url" content="https://bluesky-id.fermyon.app">
    <meta data-hid="og:description" name="og:description"
        content="simple and easy way to get DID for your Blue Sky Social account">
    <meta data-hid="og:image:width" name="og:image:width" content="800">
    <meta data-hid="og:image:height" name="og:image:height" content="600">
    <meta data-hid="og:image:type" name="og:image:type" content="image/png">
    <meta data-hid="twitter:card" name="twitter:card" content="summary_large_image">
    <meta data-hid="twitter:site" name="twitter:site" content="https://bluesky-id.fermyon.app">
    <meta data-hid="twitter:creator" name="twitter:creator" content="@rajatjindal1983">
    <meta data-hid="twitter:title" name="twitter:title" content="Get your Blue Sky DID from your handle">
    <meta data-hid="twitter:description" name="twitter:description" content="Get your Blue Sky DID from your handle">
    <meta data-hid="twitter:image" name="twitter:image" content="https://bluesky-id.fermyon.app/static/social.jpeg">
    <meta data-hid="twitter:domain" name="twitter:domain" content="https://bluesky-id.fermyon.app">

    <script>
        function conditionalReset() {
            if (document.getElementById('handle').value === '') {
                document.getElementById('did').value = '';
            }
        }

        function reset() {
            document.getElementById('handle').value = '';
            document.getElementById('did').value = '';
        }

        function getHandle() {
            const handle = document.getElementById('handle').value;
            makeRequest('/api?handle=' + handle, 'get', function (http) {
                if (http.readyState === 4 && http.status === 200) {
                    document.getElementById("did").value = http.responseText;
                }
            })
        }

        function makeRequest(url, method, callback) {
            var http = new XMLHttpRequest();
            http.open(method, url, true);

            http.onreadystatechange = function () {
                callback(http)
            }

            http.send();
        }

    </script>


</head>

<body class="bg-gray-900 h-screen">
    <div class="px-2 py-2 text-xl text-blue-50 font-bold">Blue Sky Id</div>
    <div class="w-full bg-gray-900">
        <div class="place-items-center grid mt-20">
            <div class="w-1/2 grid grid-cols-2 gap-4 mx-auto my-auto">
                <div class="col-span-1 w-full">
                    <p>
                        <input type="text" placeholder="Blue Sky Handle e.g. rajatjindal.bsky.social" id="handle"
                            onblur="conditionalReset()"
                            class="focus:ring-indigo-500 text-white px-2 py-1 shadow-lg bg-gray-800 mx-auto focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300 placeholder-gray-100 placeholder-opacity-25 focus:placeholder-opacity-0" />
                    </p>
                    <p class="mt-2 flex">
                        <button type="submit" onclick="getHandle()"
                            class="inline-flex justify-center py-1 px-3 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 hover:shadow-sm">
                            Convert
                        </button>

                        <button type="submit" onclick="reset()"
                            class="ml-2 inline-flex justify-center py-1 px-3 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 hover:shadow-sm">
                            Reset
                        </button>
                    </p>
                </div>
                <div class="col-span-1 w-full">
                    <input type="text" placeholder="Blue Sky DID" id="did"
                        class="focus:ring-indigo-500 text-white px-2 py-1 shadow-lg bg-gray-800 mx-auto focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300 placeholder-gray-100 placeholder-opacity-25 focus:placeholder-opacity-0" />

                </div>
            </div>
        </div>
    </div>
    <footer class="bg-white rounded-lg shadow m-4 dark:bg-gray-800 w-1/2 mx-auto mt-20">
        <div class="w-full mx-auto max-w-screen-xl p-4 md:flex md:items-center md:justify-between">
            <span class="text-sm text-gray-500 sm:text-center dark:text-gray-400 mx-auto">Powered by <a
                    class="hover:underline text-blue-400" href="https://www.fermyon.com/spin">Spin</a>, hosted on
                <a href="https://fermyon.com/cloud" class="hover:underline text-blue-400">Fermyon Cloud</a>.
                Source code for this app is <a href="https://github.com/rajatjindal/bluesky-id"
                    class="hover:underline text-blue-400">here</a>
            </span>
        </div>
    </footer>
</body>

</html>