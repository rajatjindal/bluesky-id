<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        function conditionalReset() {
            if (document.getElementById('handle').value === '') {
                document.getElementById('did').value = '';
            }
        }

        function reset() {
            document.getElementById('handle').value = '';
            document.getElementById('did').value = '';
        }

        function getHandle() {
            const handle = document.getElementById('handle').value;
            makeRequest('/api?handle=' + handle, 'get', function (http) {
                if (http.readyState === 4 && http.status === 200) {
                    document.getElementById("did").value = http.responseText;
                }
            })
        }

        function makeRequest(url, method, callback) {
            var http = new XMLHttpRequest();
            http.open(method, url, true);

            http.onreadystatechange = function () {
                callback(http)
            }

            http.send();
        }

    </script>


</head>

<body class="bg-gray-900 h-screen">
    <div class="px-2 py-2 text-xl text-blue-50 font-bold">Blue Sky Id</div>
    <div class="w-full bg-gray-900">
        <div class="place-items-center grid mt-20">
            <div class="w-1/2 grid grid-cols-2 gap-4 mx-auto my-auto">
                <div class="col-span-1 w-full">
                    <p>
                        <input type="text" placeholder="Blue Sky Handle e.g. rajatjindal.bsky.social" id="handle"
                            onblur="conditionalReset()"
                            class="focus:ring-indigo-500 text-white px-2 py-1 shadow-lg bg-gray-800 mx-auto focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300 placeholder-gray-100 placeholder-opacity-25 focus:placeholder-opacity-0" />
                    </p>
                    <p class="mt-2 flex">
                        <button type="submit" onclick="getHandle()"
                            class="inline-flex justify-center py-1 px-3 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 hover:shadow-sm">
                            Convert
                        </button>

                        <button type="submit" onclick="reset()"
                            class="ml-2 inline-flex justify-center py-1 px-3 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 hover:shadow-sm">
                            Reset
                        </button>
                    </p>
                </div>
                <div class="col-span-1 w-full">
                    <input type="text" placeholder="Blue Sky DID" id="did"
                        class="focus:ring-indigo-500 text-white px-2 py-1 shadow-lg bg-gray-800 mx-auto focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300 placeholder-gray-100 placeholder-opacity-25 focus:placeholder-opacity-0" />

                </div>
            </div>
        </div>
    </div>
</body>

</html>